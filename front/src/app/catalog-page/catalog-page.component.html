<h2>{{currentTitle}}</h2>
<div class="breadCrumbs">
  <div class="breadCrumbs-content"  *ngFor="let crumb of breadCrumbs; let index = index">
    <img [style]="index === 0 ? 'display:none':''" src="assets/icons/option_arrow.svg">
    <a class="crum" [class.active-bread]="index === breadCrumbs.length - 1" (click)="routeToCrumb(breadCrumbs, index)" >{{crumb.title}}</a>
  </div>
</div>
<div class="catalog-grid" *ngIf="categories && isCatalog">
  <div class="catalog-card object-fit:cover; card" *ngFor="let category of categories" (click)="goToCategory(category)">
    <h2>{{category.title}}</h2>
    <img [src]="env.url+ '/' + category.image" alt="">
  </div>
</div>
<div class="flex-catalog" *ngIf="!isCatalog && !isProduct">
  <div class="catalog-options">
    <div class="option-header">
      <h4>Каталог</h4>
    </div>
    <hr>
    <div class="option-body">
      <ul *ngIf="categoriesOptions">
        <li *ngFor="let category of categoriesOptions; let index = index">
          <div class="option-item" >
            <img [src]="category.divisionFlag?'assets/icons/option_arrow_g.svg':'assets/icons/option_arrow.svg'" (click)="openCategoryOptions(category, index)">
            <p (click)="setLeaf(null)" (click)="setProducts(category, 'category')" [routerLink]="['/catalog', category.uniq_name]">{{category.title.toUpperCase()}}</p>
          </div>
          <ul *ngIf="category.divisionFlag">
            <li *ngFor="let division of category.divisions; let indexD = index">
              <div class="option-item option-division"  >
                <img [src]="division.positionFlag?'assets/icons/option_arrow_g.svg':'assets/icons/option_arrow.svg'" (click)="openDivisionOptions(division, index , indexD)">
                <p (click)="setLeaf(null)" (click)="setProducts(division, 'division')" [routerLink]="['/catalog', category.uniq_name , division.uniq_name]">{{division.title}}</p>
              </div>
              <ul  *ngIf="division.positionFlag">
                <li  *ngFor="let position of division.positions; let indexP = index">
                  <div class="option-item option-position">
                    <div class="option-leaf" >
                      <img *ngIf="productFlag === position.uniq_name" src="assets/icons/option_leaf.svg" >
                    </div>
                    <p (click)="setProducts(position, 'position')" [routerLink]="['/catalog', category.uniq_name , division.uniq_name, position.uniq_name]" (click)="setLeaf(position)">{{position.title}}</p>
                  </div>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </div>

  </div>

  <div *ngIf="products" class="catalog-shop">
    <div *ngFor="let product of products" class="shop-card">
      <img (click)="goToProduct(product)" class="card-img" [src]="env.url + '/' + product.image">
      <p class="card-text">{{product.title}}</p>
      <div class="card-price">
        <var>{{product.price}} рублей</var>
        <span>Фасовка: {{product.packing}}</span>
      </div>
      <div class="card-buttons">
        <div class="card-add">
          <i>-</i>
          <span>0</span>
          <i>+</i>
        </div>
        <button class="card-buy">Купить</button>
      </div>
    </div>


  </div>

</div>


<div class="product-card" *ngIf="currentProduct && isProduct">
  <img class="product-img" [src]="env.url + '/' + currentProduct.image">
  <div class="product-content">
    <div class="product-content__info">
      <div>
        <b>Артикул: </b>543
      </div>
      <div>
        <b>Фасовка: </b>543
      </div>
      <div>
        <b>Количество: </b>543
      </div>
    </div>
    <div class="product-content__buttons">
      <div class="active">Описание</div>
      <div class="inactive">Отзывы</div>
    </div>
    <div class="product-content__desc">
      Описание!Описание!Описание!Описание!Описание!Описание!Описание!Описание!Описание!
      Описание!Описание!Описание!Описание!Описание!Описание!Описание!Описание!Описание!
      Описание!Описание!Описание!Описание!Описание!Описание!Описание!Описание!Описание!
    </div>
  </div>
  <div class="product-price">
    <div class="product-price__block">
      <div class="product-price__price">30 руб.</div>
      <div class="flex-card-add">
        <i>-</i>
        <span>0</span>
        <i>+</i>
      </div>
      <button class="flex-card-buy">Купить</button>
    </div>
    <img class="product-price__tree" src="assets/images/card_tree.svg" alt="">
  </div>

</div>

